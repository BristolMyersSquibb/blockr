<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4. Case study: create a new field â€¢ blockr</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="4. Case study: create a new field">
<link href="https://raw.githubusercontent.com/rstudio/bslib/main/inst/components/dist/card/card.min.js">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@latest/font/bootstrap-icons.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blockr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.9023</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/blockr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-developer-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Developer guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-developer-guides">
<li><a class="dropdown-item" href="../articles/data-blocks.html">Data blocks</a></li>
    <li><a class="dropdown-item" href="../articles/registry.html">Block registry</a></li>
    <li><a class="dropdown-item" href="../articles/plot-block.html">How to create a plot block?</a></li>
    <li><a class="dropdown-item" href="../articles/new-field.html">How to create a new field?</a></li>
    <li><a class="dropdown-item" href="../articles/blockr-examples.html">More examples</a></li>
    <li><a class="dropdown-item" href="../articles/internals.html">Internals</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>blockr 0.0.2.9023</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>blockr 0.0.2</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>blockr 0.0.1.9000</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="new-field_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="new-field_files/bslib-component-js-0.8.0/components.min.js"></script><script src="new-field_files/bslib-component-js-0.8.0/web-components.min.js" type="module"></script><link href="new-field_files/bslib-component-css-0.8.0/components.css" rel="stylesheet">
<script src="new-field_files/bslib-tag-require-0.8.0/tag-require.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>4. Case study: create a new field</h1>
            
      

      <div class="d-none name"><code>new-field.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we show how to create a new field, that is the
<code>slider_field</code>, similar to the range field with only 1
value.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>To create a field, we first need to design a
<strong>constructor</strong>. In our case, we call it
<code>new_slider_field</code>. Since fields are mirroring shiny inputs,
we can naturally provide the corresponding input parameters that are the
value, minimum, maximum and step. We pass all of these to
<code><a href="../reference/new_field.html">blockr::new_field()</a></code> and give it a custom class
<code>slider_field</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">value</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">min</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">max</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">step</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/new_field.html">new_field</a></span><span class="op">(</span></span>
<span>    value <span class="op">=</span> <span class="va">value</span>,</span>
<span>    min <span class="op">=</span> <span class="va">min</span>,</span>
<span>    max <span class="op">=</span> <span class="va">max</span>,</span>
<span>    step <span class="op">=</span> <span class="va">step</span>,</span>
<span>    <span class="va">...</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"slider_field"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>On the UI side, this is fairly straightforward as all we have to do
is call <code><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">shiny::sliderInput</a></code> with the same parameters given
in the above constructor.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui_input.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span></span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/ui_input.html">input_ids</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span><span class="op">)</span>,</span>
<span>    <span class="va">name</span>,</span>
<span>    value <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"value"</span><span class="op">)</span>,</span>
<span>    min <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>    max <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>    step <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The next step consists in validating the field to ensure provided
values are correct. For instance, we want to make sure all passed
elements are numbers. This is done within the
<code>validate_field.slider_field</code> method. We extract all the
field element values with <code>blockr::value(x, "element")</code> and
use the suitable validate function, that is
<code>validate_number()</code>. Note that if nothing is provided, the
validation falls back to <code><a href="../reference/validate_field.html">validate_field.field()</a></code>, which does
nothing.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validate_field.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">min</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span></span>
<span>  <span class="va">max</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span></span>
<span>  <span class="va">step</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">validate_number</span><span class="op">(</span><span class="va">val</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">min</span>, <span class="st">"min"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">max</span>, <span class="st">"max"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">step</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">step</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Finally, we want to make sure that we can update the field with the
<code>ui_update.slider_field()</code> method. This is needed whenever
another field would have to update the slider field, because of a
possible <strong>dependency</strong> between these 2 fields. As an
example, this is what currently happens in the <strong>filter
block</strong> where the selected column field updates the value field
(the field type changes depending on the column type).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui_update.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">session</span>, <span class="va">id</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSliderInput.html" class="external-link">updateSliderInput</a></span><span class="op">(</span></span>
<span>    <span class="va">session</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/ui_input.html">input_ids</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/update_field.html">get_field_name</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">name</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We can test our newly created field in a custom block.</p>
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container" data-bslib-card-init data-full-screen="false" data-require-bs-caller="card()" data-require-bs-version="5" id="bslib-card-7937">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<iframe class="html-fill-item" src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMAdzgCMAnRRASwgGdSoAbbgCgA6YOtyIEA1gyG4ABAzioi7GQF4ZBQWAAWpUqnaIA9IcYtORbjACecBu3YBHAK4s6dDAHMWpLU-csiQ1pGAFp5RXZpGSEdPQNjcKIMBhDqKHYYDCIGDyEASjyBCCLuVwYoBis+ETFJQuKICDhqAH12UoATWxaAMxY4bg6ZAB4QmR6nCAJSAIhBCBlFmQA3Hic4VRkIJ3gGFg083CKlmRg2Te3d-b5D46WYKAAPC53ba9uFpc4FF6uDo8+iwwwLyMhAdxqEiYiCarT6Aw68xOq24602KPWAJOZwWahxWPuT02D0eBMW31QmwpZJkwIwNII3HSyjUQnaLC6DF6-UGQju9QAvkUii4WmxUE5SBh2ZzuQiRmMJlMZiQ+KSZBzZNB4KDwZ92Fo2FZmDLbABJCAS0hIpaQyTMcWSsUddhq2Qcj4nbVwGkYjZqO3Qv1u6JgP35Gk4zaB5jB9VCHERu6LEnR0RQ2NrOAhhNPJOAmQUtO1INZnNgCn5flFIUNFEcqDkOWDaWdbrwwYK8aTaazNW6u4ortx+op86jFZl+NgRNgUenIkTuOyXOPKv68iUpdTlcVzfrwc8BtNy50Wx8FH1O4sHoyPjcCgeHx8HEFMHJyedRtwFqn8-40NZ3nWtr1ve9H2fEk3z1ZEjw6b9fx2M8GBfJ5dxJddFhAz4bzvB8ICfLQ+ApaCP3reCTyQ89qVDSs5zubDFgAOTgR5SAAWTgHwiERQVhW2FgWicVAKLgVsOXbHkhgnJVe1VdV2DgexZndDotVgOAB0+YTRIAZTbBgLStG1ySU9gVI-GNWEtJ0OVddUPRpb0aSskcXPTe1EGXQC2HzE5XJ3QC8zndyS0zVFs2nOj5z4hp5C8b4GF0gBmeBuMRIRRUdUgojZAzmw6KIspsqVTS5DsOnqeKzHIJLUq4rQeM0UUdO-XKK3yiqisE1ryHE2UKqvRpmjaUoCB-O0u1klU5h6BgiBgTYAAZZDpLS7ggFp5uoZQJwEAQ+AoqBQQgbbDsbY7+MWCrdrGUpOBMuQiB2i4RrKgrHsWP1NjmhaaTHXEZBWj8UyJNRNu29h-sLTdNgARmhmZSAfTYhF0gY4GmJ6dr5AsYqurYRrtR6bp+qSoY-VjUAYTZnCIchDtQbgrGhdlxuIuAHBafC+AwPhIYKAonI01GwH0iSabZjY7WkD86QZJl7E2DQ8v2CaPPa0hyg4HpshgFoZfoz5YqKRSGGWH9OCgCQbVhNouBtj87aOxTSANjzNBYPZIhCp23rG9Xaj4ABWfGIHqMABQAXSAA&amp;h=0" height="700" width="100%" style="border: 1px solid rgba(0,0,0,0.175); border-radius: .375rem;" allowfullscreen="" allow="autoplay" data-external="1"></iframe>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"><template>Expand</template><button aria-expanded="false" aria-label="Expand card" class="bslib-full-screen-enter badge rounded-pill"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;fill:currentColor;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg></button>
</bslib-tooltip><script data-bslib-card-init>bslib.Card.initializeAllCards();</script>
</div>
<p class="text-center">
<a class="btn btn-primary" data-bs-toggle="collapse" href="#slider-field" role="button" aria-expanded="false" aria-controls="slider-field"> Toggle code </a>
</p>
<div id="slider-field" class="collapse">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bristolmyerssquibb.github.io/blockr">blockr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">value</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">min</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">max</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">step</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/new_field.html">new_field</a></span><span class="op">(</span></span>
<span>    value <span class="op">=</span> <span class="va">value</span>,</span>
<span>    min <span class="op">=</span> <span class="va">min</span>,</span>
<span>    max <span class="op">=</span> <span class="va">max</span>,</span>
<span>    step <span class="op">=</span> <span class="va">step</span>,</span>
<span>    <span class="va">...</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"slider_field"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui_input.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span></span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/ui_input.html">input_ids</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span><span class="op">)</span>,</span>
<span>    <span class="va">name</span>,</span>
<span>    value <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"value"</span><span class="op">)</span>,</span>
<span>    min <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>    max <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>    step <span class="op">=</span> <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">validate_field.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">min</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span></span>
<span>  <span class="va">max</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span></span>
<span>  <span class="va">step</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">validate_number</span><span class="op">(</span><span class="va">val</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">min</span>, <span class="st">"min"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">max</span>, <span class="st">"max"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">step</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">validate_number</span><span class="op">(</span><span class="va">step</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui_update.slider_field</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">session</span>, <span class="va">id</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSliderInput.html" class="external-link">updateSliderInput</a></span><span class="op">(</span></span>
<span>    <span class="va">session</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/ui_input.html">input_ids</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">id</span><span class="op">)</span>,</span>
<span>    <span class="va">name</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>    <span class="fu">blockr</span><span class="fu">::</span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"step"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">registerS3method</a></span><span class="op">(</span><span class="st">"ui_input"</span>, <span class="st">"slider_field"</span>, <span class="va">ui_input.slider_field</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">registerS3method</a></span><span class="op">(</span><span class="st">"ui_update"</span>, <span class="st">"slider_field"</span>, <span class="va">ui_update.slider_field</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_slice_block</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">from</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">n_rows</span> <span class="op">&lt;-</span> \<span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    rows <span class="op">=</span> <span class="fu">new_slider_field</span><span class="op">(</span></span>
<span>      value <span class="op">=</span> <span class="va">from</span>,</span>
<span>      min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      max <span class="op">=</span> <span class="va">n_rows</span>,</span>
<span>      step <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      title <span class="op">=</span> <span class="st">"Select rows"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="../reference/new_block.html">new_block</a></span><span class="op">(</span></span>
<span>    fields <span class="op">=</span> <span class="va">fields</span>,</span>
<span>    expr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu">.</span><span class="op">(</span><span class="va">rows</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Slider slice block"</span>,</span>
<span>    <span class="va">...</span>,</span>
<span>    class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"slice_block"</span>, <span class="st">"transform_block"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new_stack.html">serve_stack</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/new_stack.html">new_stack</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/new_dataset_block.html">new_dataset_block</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span>,</span>
<span>    <span class="fu">new_slice_block</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Bennett, David Granjon, John Coene, Bristol Myers Squibb.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
