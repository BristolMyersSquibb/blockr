<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="blockr">
<title>blockr • blockr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="blockr">
<meta property="og:description" content="blockr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link href="https://raw.githubusercontent.com/rstudio/bslib/main/inst/components/dist/card/card.min.js">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@latest/font/bootstrap-icons.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-info"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">blockr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/blockr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>User Guide</h6>
    <a class="dropdown-item" href="../articles/data-blocks.html">1. Data blocks</a>
    <a class="dropdown-item" href="../articles/registry.html">2. Blocks registry</a>
    <a class="dropdown-item" href="../articles/plot-block.html">3. Case study: create a plot block</a>
    <a class="dropdown-item" href="../articles/developer-guide.html">Developer guide</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../#dark-mode"></a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="blockr_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="blockr_files/d3-3.3.8/d3.min.js"></script><script src="blockr_files/dagre-0.4.0/dagre-d3.min.js"></script><script src="blockr_files/mermaid-10.6.0/dist/mermaid.slim.min.js"></script><link href="blockr_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="blockr_files/chromatography-0.1/chromatography.js"></script><script src="blockr_files/DiagrammeR-binding-1.0.10.9000/DiagrammeR.js"></script><link href="blockr_files/htmltools-fill-0.5.7/fill.css" rel="stylesheet">
<script src="blockr_files/bslib-component-js-0.6.1/components.min.js"></script><script src="blockr_files/bslib-component-js-0.6.1/web-components.min.js" type="module"></script><link href="blockr_files/bslib-component-css-0.6.1/components.css" rel="stylesheet">
<script src="blockr_files/bslib-tag-require-0.6.1/tag-require.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>blockr</h1>
            
      
      
      <div class="d-none name"><code>blockr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="get-started">Get started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<p><code>{blockr}</code> provides plug and play block which can be used
to import, transform and visualize data.</p>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p><code>{blockr}</code> aims at abstracting the logic behind
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> functions under <strong>blocks</strong>. We assume
that a <strong>stack</strong> is a succession of dependent blocks. We
designed 3 kinds of blocks:</p>
<ul>
<li>
<strong>data</strong> block: entry level block to determine input
data.</li>
<li>
<strong>transform</strong> block: materialize <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>
operations on the selected data.</li>
<li>
<strong>output</strong> (only plot for now) block: consumes
transformed data to produce visualizations.</li>
</ul>
<p>A <strong>stack</strong> always starts from a data block and may end
either by a transform blocks or an output block.</p>
<p>Note: at the moment, there is only one output block per stack.</p>
<div id="htmlwidget-e1c807875bb5e067f411" style="width:700px;height:120px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-e1c807875bb5e067f411">{"x":{"diagram":"\n  flowchart TB\n    subgraph stack\n      input(Data);\n      transform(Transform);\n      output(Visualize);\n      input-->transform--> output;\n    end\n  "},"evals":[],"jsHooks":{"render":[{"code":"function(el, x) {\n      el.classList.add('text-center')\n    }\n    ","data":null}]}}</script>
</div>
<div class="section level3">
<h3 id="the-user-interface">The user interface<a class="anchor" aria-label="anchor" href="#the-user-interface"></a>
</h3>
<p>By default, only the last <strong>stack</strong> block is visible,
all others are collapsed. To preview all block you can set
<code>options("BLOCKR_DEV" = TRUE)</code>.</p>
<div class="figure" style="text-align: center">
<img src="figures/blockr-ui.png" alt="User Interface Overview" width="100%"><p class="caption">
User Interface Overview
</p>
</div>
</div>
<div class="section level3">
<h3 id="create-a-stack">Create a stack<a class="anchor" aria-label="anchor" href="#create-a-stack"></a>
</h3>
<p>To create a <strong>stack</strong>, you call <code><a href="../reference/new_stack.html">new_stack()</a></code>
and feed it all the required <strong>blocks</strong>. Below is a simple
stack providing a dataset selector and a filter operation.
<code><a href="../reference/new_stack.html">serve_stack()</a></code> is a simple wrapper to run the corresponding
shiny app. Note that with <code><a href="../reference/new_stack.html">serve_stack()</a></code>, you don’t need to
worry about specifying any <strong>modules IDs</strong>, they are
automatically handled by <code>{blockr}</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr.data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">stack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_stack.html">new_stack</a></span><span class="op">(</span></span>
<span>  <span class="va">data_block</span>,</span>
<span>  <span class="va">filter_block</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/new_stack.html">serve_stack</a></span><span class="op">(</span><span class="va">stack</span><span class="op">)</span></span></code></pre></div>
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container" data-bslib-card-init data-full-screen="false" data-require-bs-caller="card()" data-require-bs-version="5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<iframe class="html-fill-item" src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMAdzgCMAnRRASwgGdSoAbbgCgA6YOtyIEA1gyG4ABAzioi7GQF4ZQgBalSqdogD0+kWMkBaIgwDmGSy1IaArnQwsi+2o1PzF7IQEoBCG4WRigGAE8+YwkGAI4uCRkAHlMZCDhqAH1OKAlBCBlCmQATKC5M6PFcQKKZADMWbnIGCtEJQLjA9jgGADc4bITxPhyJPzAAXwBdIA&amp;h=0" height="700" width="100%" style="border: 1px solid rgba(0,0,0,0.175); border-radius: .375rem;" allowfullscreen="" allow="autoplay" data-external="1"></iframe>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"><template>Expand</template><span class="bslib-full-screen-enter badge rounded-pill"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;fill:currentColor;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg></span>
</bslib-tooltip><script data-bslib-card-init>bslib.Card.initializeAllCards();</script>
</div>
<div class="m-3 p-2 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3">You'll notice that some blocks, such as the `filter_block` 
  have a submit button. The reason was to prevent any expansive task
  to run without explicit user approval. That said, this feature is 
  still very much experimental and might change in the future.</div>
<p>In the next example, we’ll see how to create an which can dynamically
add or remove blocks.</p>
</div>
<div class="section level3">
<h3 id="dynamically-add-a-block">Dynamically add a block<a class="anchor" aria-label="anchor" href="#dynamically-add-a-block"></a>
</h3>
<p>Below is an app with an interface to dynamically add blocks. On the
UI side, we called <code><a href="../reference/generate_ui.html">generate_ui()</a></code>, which is nothing more
than calling the stack module UI and <code><a href="../reference/generate_server.html">generate_server()</a></code> in
the Shiny server function. If you leave <code>id</code> NULL, the
namespace is automatically handled.</p>
<p>To get the list of available blocks, we leverage the
<code>{blockr}</code> registry namely <code><a href="../reference/available_blocks.html">available_blocks()</a></code>
which exposes the currently registered blocks. You can learn more about
the registry in the dedicated vignette. <code><a href="../reference/add_block_ui.html">add_block_ui()</a></code> is a
UI helper to show a button as well as the necessary interface to contain
the new block choice. Within an <code>observer</code> we listen to the
“add block” button. Then, we pass the new block in the
<code>new_block</code> slot of the <code><a href="../reference/generate_server.html">generate_server()</a></code>
function. It accepts the name of the block to insert as well as its
position in the stack (here we append).</p>
<div class="m-3 p-2 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3">Note that `{blockr.demo}` (https://github.com/blockr-org/block.demo) 
  utilises `{masonry}` (https://github.com/blockr-org/masonry) to provide
  a better user experience, allowing one to drag and drop blocks
  within the stack.</div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr.data</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">stack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_stack.html">new_stack</a></span><span class="op">(</span><span class="va">data_block</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span></span>
<span>  ui <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/page.html" class="external-link">page_fluid</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/add_block_ui.html">add_block_ui</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/generate_ui.html">generate_ui</a></span><span class="op">(</span><span class="va">stack</span>, id <span class="op">=</span> <span class="st">"mystack"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">reactiveValues</a></span><span class="op">(</span>new_block <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span>    <span class="va">stack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_server.html">generate_server</a></span><span class="op">(</span></span>
<span>      <span class="va">stack</span>,</span>
<span>      id <span class="op">=</span> <span class="st">"mystack"</span>,</span>
<span>      new_block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="va">vals</span><span class="op">$</span><span class="va">new_block</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">add</span>, <span class="op">{</span></span>
<span>      <span class="va">vals</span><span class="op">$</span><span class="va">new_block</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>      <span class="co"># Always append to stack</span></span>
<span>      <span class="va">loc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">stack</span><span class="op">$</span><span class="va">blocks</span><span class="op">)</span></span>
<span>      <span class="va">block</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/available_blocks.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">input</span><span class="op">$</span><span class="va">selected_block</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="co"># add_block expect the current stack, the block to add and its position</span></span>
<span>      <span class="co"># (NULL is fine for the position, in that case the block will</span></span>
<span>      <span class="co"># go at the end)</span></span>
<span>      <span class="va">vals</span><span class="op">$</span><span class="va">new_block</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        block <span class="op">=</span> <span class="va">block</span>,</span>
<span>        position <span class="op">=</span> <span class="va">loc</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Blocks can be removed in any context. Keep in mind that a stack can’t
contain 2 data blocks.</p>
<div class="m-3 p-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-3">At the moment, we don't check whether removing a block breaks the pipeline.</div>
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container" data-bslib-card-init data-full-screen="false" data-require-bs-caller="card()" data-require-bs-version="5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<iframe class="html-fill-item" src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMAdzgCMAnRRASwgGdSoAbbgCgA6YOtyIEA1gyG4ABAzioi7GQF4ZQgBalSqdogD0+kWMkBaIgwDmGSy1IaArnQwsi+2o1PzF7IQEoBCG4WRigGAE8+dg02cICgkIYwyOMJBgwAEygueODQiL5UyXjAzigJGQAeUxkIOGoAfTKJPiyuBqL46NiAQXRBCBkZBxZVGTp2POZUKEs4BoAzbhGMgaGhqAyMjtEJBpG+FgyKUjs43ED1mTm6pPJ9liiuCVkjsaEYcObxf0uZPwugxk7DgDAAbqCxgsHBACKcSIcIKgHKRZEQUcjUcC4Ox2K4IH4ZCA-kMwTxlNU5HByqcIQA1HgOHF8OqNIpjAByAFUADI8+JXb5VGo3UHZeYg8GgtZXYHPcSA2UyN5qD5feXSEnrVk7ExjeQ0lgQvhk7jsAAkOs6WpKQKGRAmoIhAFEIWREZjzZsMrJiXb1qaLVbduJhTJuXytUMAMQyHrcahQL4yNCoCgZGSkIhy8o-f1DXZh7gUSz2J6581FdgC2XsylQMksbhQETzKt8PzAYBsT0g4twuDbIoAXWHUZkse9uoqcAAHmm4ZmNHAZAQHAx5GQcy8lyv2VmU1sUxAM3ZlD47Pjx7G+BGecrlAs2CuFhZdzIL-CIK9BvZsquoBBd92WoJtuGva5s3-ewV3TGsrkDS16mnUNKWCTgZSVdk1CKRUlQ-JRLxIMZdnHeCZAAXxrCjAj8MAKOHIA&amp;h=0" height="700" width="100%" style="border: 1px solid rgba(0,0,0,0.175); border-radius: .375rem;" allowfullscreen="" allow="autoplay" data-external="1"></iframe>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"><template>Expand</template><span class="bslib-full-screen-enter badge rounded-pill"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;fill:currentColor;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg></span>
</bslib-tooltip><script data-bslib-card-init>bslib.Card.initializeAllCards();</script>
</div>
</div>
<div class="section level3">
<h3 id="example-with-modules">Example with modules<a class="anchor" aria-label="anchor" href="#example-with-modules"></a>
</h3>
<p>The stack can be nested within modules. This is what we do in <a href="https://github.com/blockr-org/block.demo" class="external-link"><code>{blockr.demo}</code></a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr.data</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">blockr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">stack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_stack.html">new_stack</a></span><span class="op">(</span></span>
<span>  <span class="va">data_block</span>,</span>
<span>  <span class="va">filter_block</span>,</span>
<span>  <span class="va">select_block</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">block_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/htmlOutput.html" class="external-link">uiOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"block"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">block_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span></span>
<span>    <span class="va">id</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span><span class="op">{</span></span>
<span>      <span class="va">ns</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="va">ns</span></span>
<span></span>
<span>      <span class="va">output</span><span class="op">$</span><span class="va">block</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">renderUI</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="../reference/generate_ui.html">generate_ui</a></span><span class="op">(</span><span class="va">stack</span>, id <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu"><a href="../reference/generate_server.html">generate_server</a></span><span class="op">(</span><span class="va">stack</span>, id <span class="op">=</span> <span class="st">"b"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>    theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/bs_theme.html" class="external-link">bs_theme</a></span><span class="op">(</span><span class="fl">5L</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      class <span class="op">=</span> <span class="st">"row"</span>,</span>
<span>      <span class="fu">block_ui</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">block_server</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nicolas Bennett, David Granjon, John Coene, Bristol Myers Squibb.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
